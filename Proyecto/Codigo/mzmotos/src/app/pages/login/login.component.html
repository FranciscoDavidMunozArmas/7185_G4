<div class="wrapper">

    <div *ngIf="loading">
        <app-loading></app-loading>
    </div>

    <div class="card fadeInUp first">
        <form #loginForm="ngForm" (ngSubmit)="submitUser(loginForm)" class="card-body">
            <h5>Iniciar Sesión</h5>
            <div class="group">
                <div class="form-group">
                    <input [(ngModel)]="input.username" (ngModelChange)="onChange(username)" type="text" name="username" class="form-control" placeholder="Usuario" #username required>
                </div>
                <div class="form-group">
                    <input [(ngModel)]="input.password" (ngModelChange)="onChange(password)" type="password" name="password" class="form-control" placeholder="Contraseña" #password required>
                </div>
            </div>
            <div class="form-check">
                <input [(ngModel)]="input.keepLog" (ngModelChange)="onChange(keepLog)" name="keepLog" class="form-check-input" type="checkbox" #keepLog>
                <label class="form-check-label" for="flexCheckChecked">
                    Mantenerse Conectado
                </label>
            </div>
            <button type="submit" class="btn btn-primary">Ingresar</button>
        </form>
        <a class="form-link underlineHover mt-3" (click)="showForgetPassword()">¿Olvidaste la contraseña?</a>
    </div>

    <div class="logo-container">
        <img src="https://mzmotos.com/static/images/logo.png" alt="">
    </div>
</div>

<ng-template #forgetPassword let-modal>
    <div class="relative" style="width: 100%; height: 200px;">
        <div class="d-flex justify-content-center align-items-center h-full w-full">
            <form #passwordForm="ngForm" class="form-container" (ngSubmit)="onSubmitForgetPassword(passwordForm)">
                <div *ngIf="stepCounter === 1">
                    <div class="d-flex justify-content center w-full">
                        <h6 style="color: var(--primary-color)">Write your username</h6>
                    </div>
                    <div class="form-group">
                        <input [(ngModel)]="forgetPasswordInput.username" type="text" name="username" id="username" placeholder="Username" class="form-control">
                    </div>
                </div>
                <div *ngIf="stepCounter === 2">
                    <div class="d-flex justify-content center w-full">
                        <h6 style="color: var(--primary-color)">Write your new password</h6>
                    </div>
                    <div class="form-group">
                        <input [(ngModel)]="forgetPasswordInput.newPassword" type="password" name="password" id="password" placeholder="Password" class="form-control">
                    </div>
                    <div class="form-group">
                        <input [(ngModel)]="forgetPasswordInput.confirmPassword" type="password" name="confirm" id="confirm" placeholder="Confirm Password" class="form-control">
                    </div>
                </div>
                <div class="d-flex align-items-center w-full" style="justify-content: space-between;">
                    <button *ngIf="stepCounter !== 1" type="button" (click)="decreaseStep()" class="btn btn-primary btn-inverted"><span class="fas fa-chevron-left"></span> Back</button>
                    <button *ngIf="stepCounter !== 2" type="submit" class="btn btn-primary btn-inverted">Next <span class="fas fa-chevron-right"></span></button>
                    <button *ngIf="stepCounter === 2" type="submit" class="btn btn-primary btn-inverted">Aceptar</button>

                </div>
            </form>
        </div>
        <div class="absolute bottom w-full">
            <div class="d-flex flex-row justify-content-center">
                <span [class]="stepCounter === 1 ? 'circle step active' : 'circle step'"></span>
                <span [class]="stepCounter === 2 ? 'circle step active' : 'circle step'"></span>
            </div>
        </div>
    </div>
</ng-template>